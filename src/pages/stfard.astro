---
import BaseLayout from '../layouts/BaseLayout.astro';
import EntryPreview from '../components/EntryPreview.astro';
import { getCollection } from 'astro:content';

const drafts = await getCollection('entries', ({ data }) => data.draft);
const sorted = drafts.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<BaseLayout title="Drafts â€” The Human Element">
  <h1 class="archive-heading">Drafts</h1>

  {sorted.length === 0 ? (
    <p>No drafts at the moment.</p>
  ) : (
    <ul class="entry-list" role="list">
      {sorted.map((entry) => (
        <li><EntryPreview entry={entry} /></li>
      ))}
    </ul>
  )}
</BaseLayout>
